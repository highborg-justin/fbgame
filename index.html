<html>
<head>

<meta property="fb:app_id"          content="259826257528588" /> 
<meta property="og:type"            content="Website" />
<meta property="og:title"           content="Beat Me on Best Clicker" /> 
<meta property="og:url"             content="https://apps.facebook.com/bestclicker/" /> 
<meta property="og:description"     content="By HighBorgzZ" />
<meta property="og:image"           content="https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-frc1/t31.0-8/p720x720/1957865_4056810354502_941597101_o.jpg" /> 

<style>
.adsbutton {
 display:none;
}
.clickbutton {
 display:none;
}
.signbutton {
 display:block;
}
.menu {
 display:none;
}

</style>
 <script type="text/javascript">

var timeInSecs;
var ticker;
var flag=0;
var div
 function renderMFS() {
 // First get the list of friends for this user with the Graph API
 FB.api('/me/friends', function(response) {
   var container = document.getElementById('mfs');
   var mfsForm = document.createElement('form');
   mfsForm.id = 'mfsForm';

   // Iterate through the array of friends object and create a checkbox for each one.
   for(var i = 0; i < Math.min(response.data.length, 10); i++) {
     var friendItem = document.createElement('div');
     friendItem.id = 'friend_' + response.data[i].id;
     friendItem.innerHTML = '<input type="checkbox" name="friends" value="'
       + response.data[i].id
       + '" checked />' + response.data[i].name;
       mfsForm.appendChild(friendItem);
     }
     container.appendChild(mfsForm);

     // Create a button to send the Request(s)
     var sendButton = document.createElement('input');
     sendButton.type = 'button';
     sendButton.value = 'Send Request';
     sendButton.onclick = appreq;
     mfsForm.appendChild(sendButton);
   });
 }        
function appreq(){
   // Get the list of selected friends
   var sendUIDs = '';
   var mfsForm = document.getElementById('mfsForm');
     for(var i = 0; i < mfsForm.friends.length; i++) {
       if(mfsForm.friends[i].checked) {
         sendUIDs += mfsForm.friends[i].value + ',';
       }
     }

   // Use FB.ui to send the Request(s)
   FB.ui({method: 'apprequests',
     to: sendUIDs,
     title: 'Beat Me on Best Clicker',
     message: 'Check out this Awesome App!',
   }, callback);
 }

 function callback(response) {
   console.log(response);
 }

function fbl() {
 FB.login(function(response) {
   if (response.authResponse) {
     console.log('Welcome!  Fetching your information.... ');
     FB.api('/me', function(response) {
		div = document.getElementById('signbutton').style.display = 'none';
		div = document.getElementById('clickbutton').style.display = 'block';
		div = document.getElementById('menu').style.display = 'block';
		headToAds();
     });
   } else {
     console.log('User cancelled login or did not fully authorize.');
   }
 },{scope: 'publish_actions'});
 }
 
function startTimer(secs){
timeInSecs = parseInt(secs)-1;
ticker = setInterval("tick()",1000);   // every second
}

function tick() {
var secs = timeInSecs;
if (secs>0) {
timeInSecs--;
}
else {
clearInterval(ticker); // stop counting at zero
div = document.getElementById('clickbutton').style.display = 'none';
div = document.getElementById('adsbutton').style.display = 'block';
// startTimer(60);  // remove forward slashes in front of startTimer to repeat if required
}

document.getElementById("countdown").innerHTML = secs;
}

  // 60 seconds 

var clicks = 0;
function getClick(clicks) {
	if(flag==0){
		startTimer(10);
		flag=1;
	}
	document.getElementById('clicker').value = clicks;
}
function headToAds() {
	window.open('https://www.facebook.com/dialog/apprequests?app_id=259826257528588&message=Beat%20Me%20on%20Best%20Clicker!&redirect_uri=https://apps.facebook.com/bestclicker/ ');
}
function resetall() {
   flag=0;
   clicks=0;
   document.getElementById('clicker').value = 'Your Score';
   div = document.getElementById('clickbutton').style.display = 'block';
   div = document.getElementById('adsbutton').style.display = 'none';
   div = document.getElementById('countdown').innerHTML = '10';
}
function submitscore() {
clicks--;

FB.ui({
  method: 'feed',
  link: 'http://rawgithub.com/highborg-justin/fbgame/master/index.html',
  caption: 'I\'ve scored '+clicks+' points'
}, function(response){});
}

</script>
</head>
<body style="font-family:sans-serif; background-color:#FCDBFF; ">
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=259826257528588";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<div class="fb-like" data-href="https://apps.facebook.com/bestclicker/" data-layout="standard" data-action="like" data-show-faces="false" data-share="false"></div>
<center>
<br/>
<span id="message" style="font-size:x-large;">You have <span id="countdown" style="font-weight: bold;">10</span> seconds left! </span>
<div id="signbutton" class="signbutton">
<input value="Sign In with facebook" style="width:300px; height:400px; background-color:#4c66a4;text-align:center; font-size:x-large; color:white;" type="button"  onclick="fbl();">
</div>
<div id="clickbutton" class="clickbutton">
<input value="Click Me" style="width:300px; height:400px; background-color:#2c3e50;text-align:center; font-size:x-large; color:white;" type="button" onclick="getClick(clicks++)">
</div>
<div id="adsbutton" class="adsbutton">
<input value="Game Over" style="width:300px; height:400px; background-color:#c0392b;text-align:center; font-size:x-large; color:white;" type="button"  onclick=" FB.ui({method: 'apprequests',
  message: 'My Great Request'
}, requestCallback);">
</div>
<div class="menu" id="menu">
<input value="Try Again" style="display: inline; width:200px; height:50px; background-color:#e74c3c;text-align:center; font-size:x-large; color:white;" type="button" onclick="resetall();">
<input id="clicker" value="Your Score" style="display: inline; width:200px; height:50px; background-color:#2980b9;text-align:center; font-size:x-large; color:white;" type="button" >
<input value="Submit!" style="display: inline; width:200px; height:50px; background-color:#e74c3c;text-align:center; font-size:x-large; color:white;" type="button" onclick="submitscore();">
</div>
</body>
</html>
